### 关于顶点：
#### 共享顶点
Mesh中一个顶点会存在若干面共享的情况  
- OG练习中一般是不共享顶点，每个面都重复定义共享顶点，这样的话法线和顶点颜色等数据各自独立，着色效果是硬边界(Flat模型，或者立方体，之前没留意用的模型都是简单几何体)
- Unity中PCG地形练习用的是共享顶点重复索引的思路，所以法线等数据是共享的，着色的时候是连续过度的
- Unity中没有留意过这种差别，这个不是在Unity中控制渲染模型决定的，是模型制作的时候已经配置好是否重复顶点了(硬分界或者独立uv等会导致)
- > 顶点共享与否主要影响着色时候是否连续过度

### 法线：
#### 顶点法线和面法线
这两个概念一直忽略没进行区分，甚至一直混用，是两个不同的东西
- 顶点共享可能是共享法线(所有共点面法线加权平均)，也可能是各个面独立的单独法线，这取决于上述mesh是否共享顶点
- 由三个顶点的法线在面上插值而来，不管是上述的共享法线还是单独法线，**这里讨论的是面上的单位了类似frag**
- **面法线表示面上的单位的朝向近似向量**，近似是指模型精度在面上已经没有更多信息了

#### 法线贴图：
一般有两个场景：
- 在模型的三角面内，用近似的方式进一步补充面内凹凸信息(法线)，一般是模型的小小三角面这种级别
- 另一个情景想省算力内存，直接用低模然后全法线贴图fake，这种是直接砍掉了模型的几何精度，针对的三角片元是很大的，**局限是很容易穿帮，因为fake的面积大了**
- 上述的两个都只是近似模拟，代替不了真实的几何高度数据，所以都存在误差(调整视角或者光线角度的时候计算的结果就是不对的)，只不过误差程度不一样，第一个误差是很小，第二个很容易严重偏差比如水面模拟

#### 顶点/面法线和贴图采样法线：
- 这里是最容易产生误区混淆的，顶点/面发现都是根据**几何信息插值**是符合空间几何的映射的，贴图采样法线是用uv映射的，映射关系是**人为UV锚定**的(贴图想怎么锚定顶点和uv都行)  
- 法线数据加工逻辑是跟空间有关的时候比如光线角度计算，那数据来源本身有没有几何关系就直接关乎结果是否正确，这也是为什么需要下面的切线空间
- 都是法线数据，用的时候没有细究是怎么来的，会感觉切线空间发现换算TBN得到世界法线有点鸡肋直接不就是vertex.normal的困惑，原因就在于两者就不是一个东西，一个参与几何换算，一个是预定义数据采样(uv不参与MVP)

### 切线空间：
#### 模型空间法线图
- 用模型空间法线图采样的normal'的时候，**vertex.normal是没有用上的**，直接用bump进行fake了，这个时候normal'不要习惯性的以为参与MVP运算，noraml'是uv决定的而uv不参与MVP只是简单插值，所以MPV后再uv采样数据错误
- 或者在vs阶段先采样出normal'，但这样跟用normal采样后给fs没区别了，bump是为了在fs阶段更精细的用uv采样细节法线信息
- 总结：法线贴图是为了在fs阶段fake法线细节，但他不参与几何MVP所以几何换算的时候效果异常

#### 切线空间法线图
- 上面提到用法线图的时候其实vertex.normal是没用上的，所以可以两者结合，用vertex.normal插值提供**片元**的大致朝向，即切线空间坐标系，采样补充细节
- 在用相对于切线空间坐标系下的向量来表示该片元的**法线细节**，为什么不直接用这个采样的vertex.normal因为这已经是三角面内了片元没有办法提供**准确的几何法线了**，这个插值是粒度误差了
- 每个片元都有自己的切线空间，z轴是vertex.normal(模型空间下定义的)，纹理铺开的u分量方向是tangent(也是要在模型空间下算好存入)，作为切线空间x轴

误区在于采样出来的切法线跟插值的vertex.normal不是同一个东西，或者说讨论的不是同一个东西，最终方案是两者的结合

#### 切线题图的作用：
- 支持旋转变形等，（动画，...）
- 支持复用
- 压缩
- 待补充

发现数据可以来自模型带的发现数据(顶点有关)
